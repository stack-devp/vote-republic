{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/Users/stack/prod/voterepublic/vote-republic/pages/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport fetch from 'isomorphic-unfetch';\nimport Link from 'next/link';\n\nHomePage.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var req, query, protocol, host, pageRequest, res, json;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            req = _ref.req, query = _ref.query;\n            protocol = req ? \"\".concat(req.headers['x-forwarded-proto'], \":\") : location.protocol;\n            host = req ? req.headers['x-forwarded-host'] : location.host;\n            console.log('req', req);\n            pageRequest = \"http://localhost:4000/api/list?page=\".concat(query.page || 1, \"&limit=\").concat(query.limit || 9);\n            _context.next = 7;\n            return fetch(pageRequest);\n\n          case 7:\n            res = _context.sent;\n            _context.next = 10;\n            return res.json();\n\n          case 10:\n            json = _context.sent;\n            return _context.abrupt(\"return\", json);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nfunction HomePage(props) {\n  console.log('props', props);\n  return __jsx(React.Fragment, null, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 5\n    }\n  }, \"OK\"));\n}\n\n_c = HomePage;\nexport default HomePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"sources":["/Users/stack/prod/voterepublic/vote-republic/pages/index.js"],"names":["fetch","Link","HomePage","getInitialProps","req","query","protocol","headers","location","host","console","log","pageRequest","page","limit","res","json","props"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,oBAAlB;AACA,OAAOC,IAAP,MAAiB,WAAjB;;AAEAC,QAAQ,CAACC,eAAT;AAAA,uEAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAASC,YAAAA,GAAT,QAASA,GAAT,EAAcC,KAAd,QAAcA,KAAd;AACnBC,YAAAA,QADmB,GACRF,GAAG,aACbA,GAAG,CAACG,OAAJ,CAAY,mBAAZ,CADa,SAEhBC,QAAQ,CAACF,QAHY;AAInBG,YAAAA,IAJmB,GAIZL,GAAG,GAAGA,GAAG,CAACG,OAAJ,CAAY,kBAAZ,CAAH,GAAqCC,QAAQ,CAACC,IAJrC;AAKzBC,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBP,GAAnB;AACMQ,YAAAA,WANmB,iDAMkCP,KAAK,CAACQ,IAAN,IACzD,CAPuB,oBAOZR,KAAK,CAACS,KAAN,IAAe,CAPH;AAAA;AAAA,mBAQPd,KAAK,CAACY,WAAD,CARE;;AAAA;AAQnBG,YAAAA,GARmB;AAAA;AAAA,mBASNA,GAAG,CAACC,IAAJ,EATM;;AAAA;AASnBA,YAAAA,IATmB;AAAA,6CAUlBA,IAVkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA3B;;AAAA;AAAA;AAAA;AAAA;;AAaA,SAASd,QAAT,CAAkBe,KAAlB,EAAyB;AACrBP,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBM,KAArB;AACF,SACE,4BACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA,CADF;AA6BD;;KA/BQf,Q;AAiCT,eAAeA,QAAf","sourcesContent":["import fetch from 'isomorphic-unfetch'\nimport Link from 'next/link'\n\nHomePage.getInitialProps = async ({ req, query }) => {\n  const protocol = req\n    ? `${req.headers['x-forwarded-proto']}:`\n    : location.protocol\n  const host = req ? req.headers['x-forwarded-host'] : location.host\n  console.log('req', req)\n  const pageRequest = `http://localhost:4000/api/list?page=${query.page ||\n    1}&limit=${query.limit || 9}`\n  const res = await fetch(pageRequest)\n  const json = await res.json()\n  return json\n}\n\nfunction HomePage(props) {\n    console.log('props', props)\n  return (\n    <>\n    <span>OK</span>\n      {/* <ul>\n        {profiles.map(p => (\n          <li className=\"profile\" key={p.id}>\n            <Link href={`/profile?id=${p.id}`}>\n              <a>\n                <img src={p.avatar} />\n                <span>{p.name}</span>\n              </a>\n            </Link>\n          </li>\n        ))}\n      </ul>\n      <nav>\n        {page > 1 && (\n          <Link href={`/?page=${page - 1}&limit=9`}>\n            <a>Previous</a>\n          </Link>\n        )}\n        {page < pageCount && (\n          <Link href={`/?page=${page + 1}&limit=9`}>\n            <a className=\"next\">Next</a>\n          </Link>\n        )}\n      </nav> */}\n    </>\n  )\n}\n\nexport default HomePage"]},"metadata":{},"sourceType":"module"}