{"ast":null,"code":"const mysql = require('serverless-mysql');\n\nconsole.log('process.env.MYSQL_HOST', process.env.MYSQL_HOST);\nconst db = mysql({\n  config: {\n    host: process.env.MYSQL_HOST,\n    database: process.env.MYSQL_DATABASE,\n    user: process.env.MYSQL_USER,\n    password: process.env.MYSQL_PASSWORD\n  }\n});\n\nexports.query = async query => {\n  try {\n    const results = await db.query(query);\n    await db.end();\n    return results;\n  } catch (error) {\n    return {\n      error\n    };\n  }\n};","map":{"version":3,"sources":["/Users/stack/prod/voterepublic/vote-republic/lib/db.js"],"names":["mysql","require","console","log","process","env","MYSQL_HOST","db","config","host","database","MYSQL_DATABASE","user","MYSQL_USER","password","MYSQL_PASSWORD","exports","query","results","end","error"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,kBAAD,CAArB;;AAEAC,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCC,OAAO,CAACC,GAAR,CAAYC,UAAlD;AACA,MAAMC,EAAE,GAAGP,KAAK,CAAC;AAEfQ,EAAAA,MAAM,EAAE;AACNC,IAAAA,IAAI,EAAEL,OAAO,CAACC,GAAR,CAAYC,UADZ;AAENI,IAAAA,QAAQ,EAAEN,OAAO,CAACC,GAAR,CAAYM,cAFhB;AAGNC,IAAAA,IAAI,EAAER,OAAO,CAACC,GAAR,CAAYQ,UAHZ;AAINC,IAAAA,QAAQ,EAAEV,OAAO,CAACC,GAAR,CAAYU;AAJhB;AAFO,CAAD,CAAhB;;AAUAC,OAAO,CAACC,KAAR,GAAgB,MAAMA,KAAN,IAAe;AAC7B,MAAI;AACF,UAAMC,OAAO,GAAG,MAAMX,EAAE,CAACU,KAAH,CAASA,KAAT,CAAtB;AACA,UAAMV,EAAE,CAACY,GAAH,EAAN;AACA,WAAOD,OAAP;AACD,GAJD,CAIE,OAAOE,KAAP,EAAc;AACd,WAAO;AAAEA,MAAAA;AAAF,KAAP;AACD;AACF,CARD","sourcesContent":["const mysql = require('serverless-mysql')\n\nconsole.log('process.env.MYSQL_HOST', process.env.MYSQL_HOST)\nconst db = mysql({\n    \n  config: {\n    host: process.env.MYSQL_HOST,\n    database: process.env.MYSQL_DATABASE,\n    user: process.env.MYSQL_USER,\n    password: process.env.MYSQL_PASSWORD\n  }\n})\n\nexports.query = async query => {\n  try {\n    const results = await db.query(query)\n    await db.end()\n    return results\n  } catch (error) {\n    return { error }\n  }\n}"]},"metadata":{},"sourceType":"script"}